{"code":"import * as tslib_1 from \"tslib\";\r\nimport { EventEmitter } from './EventEmitter';\r\nimport fieldWithoutFeedback from './fieldWithoutFeedback';\r\nexport var FieldEvent;\r\n(function (FieldEvent) {\r\n    FieldEvent[\"Added\"] = \"FIELD_ADDED\";\r\n    FieldEvent[\"Removed\"] = \"FIELD_REMOVED\";\r\n    FieldEvent[\"Updated\"] = \"FIELD_UPDATED\";\r\n})(FieldEvent || (FieldEvent = {}));\r\nvar FieldsStore = (function (_super) {\r\n    tslib_1.__extends(FieldsStore, _super);\r\n    function FieldsStore() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.fields = Object.create(null);\r\n        return _this;\r\n    }\r\n    FieldsStore.prototype.addField = function (fieldName) {\r\n        if (this.fields[fieldName] === undefined) {\r\n            var newField = fieldWithoutFeedback;\r\n            this.fields[fieldName] = newField;\r\n            this.emit(FieldEvent.Added, fieldName, newField);\r\n        }\r\n    };\r\n    FieldsStore.prototype.removeField = function (fieldName) {\r\n        console.assert(this.fields[fieldName] !== undefined, \"Unknown field '\" + fieldName + \"'\");\r\n        delete this.fields[fieldName];\r\n        this.emit(FieldEvent.Removed, fieldName);\r\n    };\r\n    FieldsStore.prototype.cloneField = function (fieldName) {\r\n        var field = this.fields[fieldName];\r\n        console.assert(field !== undefined, \"Unknown field '\" + fieldName + \"'\");\r\n        var newField = {\r\n            dirty: field.dirty,\r\n            errors: new Set(field.errors),\r\n            warnings: new Set(field.warnings),\r\n            infos: new Set(field.infos),\r\n            validationMessage: field.validationMessage\r\n        };\r\n        return newField;\r\n    };\r\n    FieldsStore.prototype.updateField = function (fieldName, field) {\r\n        console.assert(this.fields[fieldName] !== undefined, \"Unknown field '\" + fieldName + \"'\");\r\n        this.fields[fieldName] = field;\r\n        this.emit(FieldEvent.Updated, fieldName);\r\n    };\r\n    FieldsStore.prototype.removeFieldFor = function (fieldName, fieldFeedbacksKey) {\r\n        var field = this.fields[fieldName];\r\n        console.assert(field !== undefined, \"Unknown field '\" + fieldName + \"'\");\r\n        var reject = function (fieldFeedbackKey) { return fieldFeedbacksKey !== Math.floor(fieldFeedbackKey); };\r\n        field.errors = new Set(tslib_1.__spread(field.errors).filter(reject));\r\n        field.warnings = new Set(tslib_1.__spread(field.warnings).filter(reject));\r\n        field.infos = new Set(tslib_1.__spread(field.infos).filter(reject));\r\n        this.emit(FieldEvent.Updated, fieldName);\r\n    };\r\n    FieldsStore.prototype.getFieldFor = function (fieldName, fieldFeedbacksKey) {\r\n        var field = this.fields[fieldName];\r\n        console.assert(field !== undefined, \"Unknown field '\" + fieldName + \"'\");\r\n        var filter = function (fieldFeedbackKey) { return fieldFeedbacksKey === Math.floor(fieldFeedbackKey); };\r\n        var fieldFor = {\r\n            dirty: field.dirty,\r\n            errors: new Set(tslib_1.__spread(field.errors).filter(filter)),\r\n            warnings: new Set(tslib_1.__spread(field.warnings).filter(filter)),\r\n            infos: new Set(tslib_1.__spread(field.infos).filter(filter)),\r\n            validationMessage: field.validationMessage\r\n        };\r\n        return fieldFor;\r\n    };\r\n    FieldsStore.prototype.containErrors = function () {\r\n        var _this = this;\r\n        var fieldNames = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            fieldNames[_i] = arguments[_i];\r\n        }\r\n        return fieldNames.some(function (fieldName) {\r\n            var field = _this.fields[fieldName];\r\n            return field !== undefined && field.errors.size > 0;\r\n        });\r\n    };\r\n    FieldsStore.prototype.containWarnings = function () {\r\n        var _this = this;\r\n        var fieldNames = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            fieldNames[_i] = arguments[_i];\r\n        }\r\n        return fieldNames.some(function (fieldName) {\r\n            var field = _this.fields[fieldName];\r\n            return field !== undefined && field.warnings.size > 0;\r\n        });\r\n    };\r\n    FieldsStore.prototype.containInfos = function () {\r\n        var _this = this;\r\n        var fieldNames = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            fieldNames[_i] = arguments[_i];\r\n        }\r\n        return fieldNames.some(function (fieldName) {\r\n            var field = _this.fields[fieldName];\r\n            return field !== undefined && field.infos.size > 0;\r\n        });\r\n    };\r\n    FieldsStore.prototype.areValidDirtyWithoutWarnings = function () {\r\n        var _this = this;\r\n        var fieldNames = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            fieldNames[_i] = arguments[_i];\r\n        }\r\n        return fieldNames.some(function (fieldName) {\r\n            var field = _this.fields[fieldName];\r\n            return field !== undefined && field.dirty === true && field.errors.size === 0 && field.warnings.size === 0;\r\n        });\r\n    };\r\n    return FieldsStore;\r\n}(EventEmitter));\r\nexport { FieldsStore };\r\n//# sourceMappingURL=FieldsStore.js.map","map":{"version":3,"file":"FieldsStore.js","sourceRoot":"","sources":["FieldsStore.ts"],"names":[],"mappings":"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"}}
