{"code":"import * as tslib_1 from \"tslib\";\r\nimport * as React from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport { withValidateEventEmitter } from './withValidateEventEmitter';\r\nimport { FieldEvent } from './FieldsStore';\r\nvar FieldFeedbacksComponent = (function (_super) {\r\n    tslib_1.__extends(FieldFeedbacksComponent, _super);\r\n    function FieldFeedbacksComponent() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return FieldFeedbacksComponent;\r\n}(React.Component));\r\nexport { FieldFeedbacksComponent };\r\nvar FieldFeedbacks = (function (_super) {\r\n    tslib_1.__extends(FieldFeedbacks, _super);\r\n    function FieldFeedbacks(props, context) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.fieldFeedbackKey = 0;\r\n        _this.validate = _this.validate.bind(_this);\r\n        _this.reRender = _this.reRender.bind(_this);\r\n        _this.key = context.form.computeFieldFeedbacksKey();\r\n        return _this;\r\n    }\r\n    FieldFeedbacks.prototype.getChildContext = function () {\r\n        return {\r\n            fieldFeedbacks: this\r\n        };\r\n    };\r\n    FieldFeedbacks.prototype.computeFieldFeedbackKey = function () {\r\n        return this.key + this.fieldFeedbackKey++ / 10;\r\n    };\r\n    FieldFeedbacks.prototype.componentWillMount = function () {\r\n        var fieldName = this.props.for;\r\n        this.context.form.fieldsStore.addField(fieldName);\r\n        this.context.form.addValidateEventListener(this.validate);\r\n        this.context.form.fieldsStore.addListener(FieldEvent.Updated, this.reRender);\r\n    };\r\n    FieldFeedbacks.prototype.componentWillUnmount = function () {\r\n        var fieldName = this.props.for;\r\n        this.context.form.fieldsStore.removeField(fieldName);\r\n        this.context.form.removeValidateEventListener(this.validate);\r\n        this.context.form.fieldsStore.removeListener(FieldEvent.Updated, this.reRender);\r\n    };\r\n    FieldFeedbacks.prototype.validate = function (input) {\r\n        var fieldName = this.props.for;\r\n        if (input.name === fieldName) {\r\n            this.context.form.fieldsStore.removeFieldFor(fieldName, this.key);\r\n            this.emitValidateEvent(input);\r\n        }\r\n    };\r\n    FieldFeedbacks.prototype.reRender = function (_fieldName) {\r\n        var fieldName = this.props.for;\r\n        if (fieldName === _fieldName) {\r\n            this.forceUpdate();\r\n        }\r\n    };\r\n    FieldFeedbacks.prototype.render = function () {\r\n        var _a = this.props, fieldName = _a.for, show = _a.show, children = _a.children, divProps = tslib_1.__rest(_a, [\"for\", \"show\", \"children\"]);\r\n        return React.createElement(\"div\", tslib_1.__assign({}, divProps), children);\r\n    };\r\n    FieldFeedbacks.defaultProps = {\r\n        show: 'first'\r\n    };\r\n    FieldFeedbacks.contextTypes = {\r\n        form: PropTypes.object.isRequired\r\n    };\r\n    FieldFeedbacks.childContextTypes = {\r\n        fieldFeedbacks: PropTypes.object.isRequired\r\n    };\r\n    return FieldFeedbacks;\r\n}(withValidateEventEmitter(FieldFeedbacksComponent)));\r\nexport { FieldFeedbacks };\r\n//# sourceMappingURL=FieldFeedbacks.js.map","map":{"version":3,"file":"FieldFeedbacks.js","sourceRoot":"","sources":["FieldFeedbacks.tsx"],"names":[],"mappings":"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"}}
